var page=1;$(function(){if($(".loadmore").length>0){loadMoreSetup()}});function loadMoreSetup(){var t=$(".loadmore");t.html("<a href='#' class='more'>More Posts</a>");t.on("click",".more",function(){page++;$.when($.ajax("/_collections?collection=articles&order=desc&rpp=1&page="+page,"json")).then(function(t,e,o){for(i in t.collection){var r=t.collection[i];$('<article><h2><a href="'+r.slug+'">'+r.title+"</a></h2><p>"+r.body.stripHtml().truncateWords(50,r.slug)+'</p><div class="details">Posted: <span>'+r.date.postedFormat()+"</span></div><hr></article>").insertBefore(".content .loadmore")}if(page>=t.total_pages)$(".loadmore").hide()});return false})}String.prototype.stripHtml=function(){var t=document.createElement("div");t.innerHTML=this;return t.textContent||t.innerText||""};String.prototype.truncateWords=function(t,e){var o=this.split(" ");if(t<o.length)value=o.slice(0,t).join(" ")+"... <a href='"+e+"' class='more'>Read the post in full</a>";return value};String.prototype.postedFormat=function(){var t=new Date(this);return t.toDateString()};