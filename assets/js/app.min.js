var page=1;var rrp=3;$(function(){if($(".paging").length>0){paging()}});function paging(){var e=$(".paging");if(e.children(".next").length>0)e.html("<a href='#page-2' class='more'>Next "+rrp+" Posts</a>");else e.hide();e.on("click",".more",function(){page++;$.when($.ajax("/_collections?collection=article&order=desc&rpp="+rrp+"&page="+page,"json")).then(function(t,r,a){var n=0;for(i in t.collection){n++;var o=t.collection[i];var p=o.body;if(o.truncate)p=p.stripHtml().truncateWords(50,o.slug);var l="";if(n==1)l=" id='page-"+page+"'";$("<article"+l+'><h2><a href="'+o.slug+'">'+o.title+"</a></h2><p>"+p+'</p><div class="details">Posted: <span>'+o.date.postedFormat()+"</span></div><hr></article>").insertBefore(".content .paging")}if(page>=t.total_pages)e.hide();else{var s=t.page===t.total_pages?t.total_records-(t.page-1)*t.records_per_page:t.records_per_page;e.children(".more").attr("href","#page-"+t.page).text("Next "+s+" Posts")}$("html, body").animate({scrollTop:$("#page-"+page).offset().top},650)});return false})}String.prototype.stripHtml=function(){var e=document.createElement("div");e.innerHTML=this;return e.textContent||e.innerText||""};String.prototype.truncateWords=function(e,t){var r=this.split(" ");if(e<r.length)value=r.slice(0,e).join(" ")+"... <a href='"+t+"' class='more'>Read the post in full</a>";return value};String.prototype.postedFormat=function(){var e=new Date(this);return e.toDateString()};