function paging(){var e=$(".paging");e.children(".next").length>0?e.html("<a href='#page-2' class='more'>fetch more posts</a>"):e.hide(),e.on("click",".more",function(){return page++,$.when($.ajax("/_collections?collection=article&order=desc&rpp="+rrp+"&page="+page,"json")).then(function(t){var r=0;for(i in t.collection){r++;var a=t.collection[i],n=a.body.stripHtml().truncateWords(50,a.slug),o="";1==r&&(o=" id='page-"+page+"'"),$("<article"+o+'><h2><a href="'+a.slug+'">'+a.title+'</a></h2><div class="date">Posted: <span>'+a.date.postedFormat()+"</span></div><p>"+n+"</p><hr></article>").insertBefore(".content .paging")}page>=t.total_pages?e.hide():t.page===t.total_pages?t.total_records-(t.page-1)*t.records_per_page:t.records_per_page,$("html, body").animate({scrollTop:$("#page-"+page).offset().top},650)}),!1})}var page=1,rrp=5;$(function(){$(".paging").length>0&&paging()}),String.prototype.stripHtml=function(){var e=document.createElement("div");return e.innerHTML=this,e.textContent||e.innerText||""},String.prototype.truncateWords=function(e,t){var r=this.split(" ");return e<r.length&&(value=r.slice(0,e).join(" ")+"... <a href='"+t+"' class='more'>Read the post in full</a>"),value},String.prototype.postedFormat=function(){var e=new Date(this);return e.toDateString()};
